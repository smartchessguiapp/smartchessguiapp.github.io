<head>
  <meta charset="utf-8" />
  <title></title>
  <style>
      .gentext
      {
        text-align: center;
        font-family: monospace;
      }
      .numtext
      {
        width:50px;        
      }
      .handletext
      {
        width:150px;
      }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js">
  </script>

  <script>
    function getUrlVars()
    {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for(var i = 0; i < hashes.length; i++)
        {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;
    }
    function getData() {
      var handle=d3.select("#handle").node().value;
      var page=d3.select("#page").node().value;
      var nb=d3.select("#nb").node().value;
      var requestUri="https://en.lichess.org/api/user/"+handle+"/games?page="+page+"&nb="+nb
      d3.select("#requestUri").text(requestUri);
      d3.json(requestUri, function(error, json) { if (error) throw error;
        var jsonStr=JSON.stringify(json)
        d3.select("#jsonStr").text("length: "+jsonStr.length+"\n"+jsonStr);
      });
    }
  </script>
</head>

<body>
  <p>
    <form>
      Handle
      <input type="text" value="sakkozik" id="handle" class="gentext handletext">
      Page
      <input type="text" value="1" id="page" class="gentext numtext">
      Games/page
      <input type="text" value="10" id="nb" class="gentext numtext">
    </form>
  </p>
  <p>
    <button onclick="getData()">Get data</button>
  </p>  
  <p id="requestUri"></p>
  <textarea rows="10" cols="80" id="jsonStr"></textarea>>

  <script>
    var uv=getUrlVars()
    var user=uv["user"]    
    if(user!=undefined)
    {
      console.log(user)
      d3.select("#handle").node().value=user
    }
    var doget=uv["doget"]
    if(doget!=undefined)
    {
      getData()
    }
  </script>
</body>

</html>